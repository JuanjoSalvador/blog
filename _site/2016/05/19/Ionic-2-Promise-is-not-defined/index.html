<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Juanjo Salvador's personal webpage">

    <title>
        
            Ionic 2 (beta) y el error "Promise is not defined" &middot; Ingeniero y no puedo
        
    </title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css">
    <link rel="stylesheet" href="/assets/styles.css">

    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Ionic 2 (beta) y el error “Promise is not defined” | Ingeniero y no puedo</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Ionic 2 (beta) y el error “Promise is not defined”" />
<meta name="author" content="Juanjo Salvador" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Esta entrada es más un apunte personal que un artículo. Sin embargo, mis apuntes personales pueden resultar instructivos, así que no veo por qué no colgarlo aquí." />
<meta property="og:description" content="Esta entrada es más un apunte personal que un artículo. Sin embargo, mis apuntes personales pueden resultar instructivos, así que no veo por qué no colgarlo aquí." />
<link rel="canonical" href="http://localhost:4000/2016/05/19/Ionic-2-Promise-is-not-defined/" />
<meta property="og:url" content="http://localhost:4000/2016/05/19/Ionic-2-Promise-is-not-defined/" />
<meta property="og:site_name" content="Ingeniero y no puedo" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-05-19T00:00:00+02:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Ionic 2 (beta) y el error “Promise is not defined”" />
<script type="application/ld+json">
{"description":"Esta entrada es más un apunte personal que un artículo. Sin embargo, mis apuntes personales pueden resultar instructivos, así que no veo por qué no colgarlo aquí.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2016/05/19/Ionic-2-Promise-is-not-defined/"},"url":"http://localhost:4000/2016/05/19/Ionic-2-Promise-is-not-defined/","author":{"@type":"Person","name":"Juanjo Salvador"},"headline":"Ionic 2 (beta) y el error “Promise is not defined”","@type":"BlogPosting","dateModified":"2016-05-19T00:00:00+02:00","datePublished":"2016-05-19T00:00:00+02:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body>
        <section class="hero is-primary">
            <div class="hero-body">
                <div class="container main">
                    <div class="columns is-mobile">
                        <div class="column">
                            <h1 class="title is-1"><a href="/">Ingeniero y no puedo</a></h1>
                            <h2 class="subtitle is-3">El blog personal de Juanjo Salvador</h2>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <div class="container">
                <div class="columns is-mobile">
                    <div class="column">
                        <div class="post">
  
  <h2 class="title is-2 post-title">Ionic 2 (beta) y el error "Promise is not defined"</h2>
  <div class="post-info">
    <time datetime="" class="frontpage-time has-text-grey-light">May 19, 2016</time>
  </div>

  <p>Esta entrada es más un apunte personal que un artículo. Sin embargo, mis apuntes personales pueden resultar instructivos, así que no veo por qué no colgarlo aquí.</p>

<p>Trata sobre como resolver (o como he resuelto yo) el error <code class="language-plaintext highlighter-rouge">Promise is not defined</code> al intentar depurar una aplicación híbrida de Ionic 2 (beta 22) desde el navegador, usando <code class="language-plaintext highlighter-rouge">ionic serve</code>.</p>

<h3 id="el-problema-descrito">El problema, descrito</h3>

<p>Al ejecutar <code class="language-plaintext highlighter-rouge">ionic serve</code>, es posible que obtengamos el siguiente log.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Running 'serve:before' gulp task before serve
[18:28:32] Starting 'clean'...
[18:28:32] Finished 'clean' after 17 ms
[18:28:32] Starting 'watch'...
[18:28:32] Starting 'sass'...
[18:28:32] Starting 'html'...
[18:28:32] Starting 'fonts'...
[18:28:32] Starting 'scripts'...
[18:28:32] Finished 'scripts' after 76 ms
[18:28:32] Finished 'html' after 85 ms
[18:28:32] Finished 'fonts' after 93 ms
Caught exception:
 ReferenceError: Promise is not defined
    at LazyResult.async (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/postcss/lib/lazy-result.js:157:31)
    at LazyResult.then (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/postcss/lib/lazy-result.js:79:21)
    at DestroyableTransform._transform (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/gulp-autoprefixer/index.js:24:6)
    at DestroyableTransform.Transform._read (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/through2/node_modules/readable-stream/lib/_stream_transform.js:159:10)
    at DestroyableTransform.Transform._write (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/through2/node_modules/readable-stream/lib/_stream_transform.js:147:83)
    at doWrite (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/through2/node_modules/readable-stream/lib/_stream_writable.js:313:64)
    at writeOrBuffer (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/through2/node_modules/readable-stream/lib/_stream_writable.js:302:5)
    at DestroyableTransform.Writable.write (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/through2/node_modules/readable-stream/lib/_stream_writable.js:241:11)
    at DestroyableTransform.ondata (/Users/linuxeitor/Documents/Ionic2/Ionic2SecondApp/node_modules/through2/node_modules/readable-stream/lib/_stream_readable.js:531:20)
    at DestroyableTransform.emit (events.js:95:17) 

Mind letting us know? https://github.com/driftyco/ionic-cli/issues
</code></pre></div></div>

<p>Los señores de Ionic, muy amablemente introdujeron un enlace a la página de incidencias de su repositorio, para que notifiquemos el error. Sin embargo, si haces una búsqueda en dicha URL, verás que hay muchos casos similares con respuestas muy variopintas.</p>

<h3 id="el-origen">El origen</h3>

<p>Tras indagar en Internet (y mucho StackOverflow), he llegado a la conclusión de que el origen del problema es una <strong>dependencia faltante</strong> y una configuración de Gulp. En concreto, falta añadir un <code class="language-plaintext highlighter-rouge">requiere</code> a <code class="language-plaintext highlighter-rouge">gulpfile.js</code> y un paquete NPM a nuestra lista de módulos.</p>

<h3 id="la-solución">La solución</h3>

<p>Sencillo. Solo tenemos que abrir nuestro <code class="language-plaintext highlighter-rouge">gulpfile.js</code> (en la raíz del proyecto Ionic), y añadir lo siguiente a la línea 6:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require('es6-promise').polyfill();
</code></pre></div></div>

<p>A continuación, instalamos el paquete <code class="language-plaintext highlighter-rouge">es6-promise</code> con NPM:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install es6-promise
</code></pre></div></div>

<p>¡Y a volar!</p>

<p>Por si acaso, he hecho un <a href="https://github.com/driftyco/ionic2-app-base/pull/31">pull request al repositorio de la plantilla <code class="language-plaintext highlighter-rouge">blank</code> de Ionic 2</a>, solucionando este problema.</p>



</div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer">
    <div class="content has-text-centered">
        <p>
            Made with <span style="color: #e25555;">&hearts;</span> by Juanjo Salvador
        </p>
    </div>
</footer>
  </body>
</html>